<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=0970a0d2116d6377d26dd99d6ab42d9c9d8abfe4">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Custom Auto-Configuration in SpringBoot | JSBlogs</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Custom Auto-Configuration in SpringBoot" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This blog post will explain how to enable spring boot auto-configuration for your shared library/project." />
<meta property="og:description" content="This blog post will explain how to enable spring boot auto-configuration for your shared library/project." />
<link rel="canonical" href="http://0.0.0.0:4000/spring/2020/02/18/Custom-Auto-Configuration-in-SpringBoot" />
<meta property="og:url" content="http://0.0.0.0:4000/spring/2020/02/18/Custom-Auto-Configuration-in-SpringBoot" />
<meta property="og:site_name" content="JSBlogs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-18T09:30:00+05:30" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/spring/2020/02/18/Custom-Auto-Configuration-in-SpringBoot"},"url":"http://0.0.0.0:4000/spring/2020/02/18/Custom-Auto-Configuration-in-SpringBoot","headline":"Custom Auto-Configuration in SpringBoot","dateModified":"2020-02-18T09:30:00+05:30","datePublished":"2020-02-18T09:30:00+05:30","description":"This blog post will explain how to enable spring boot auto-configuration for your shared library/project.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

<header>
    <div class="container">
        <small class="date">18 February 2020</small>
        <div style="float: right">
            <a href="/" >
                <i class="fa fa-home fa-3x" aria-hidden="true"></i>
            </a>
        </div>
        <h1>Custom Auto-Configuration in SpringBoot</h1>

        <p class="view"></p>
        
        <small class="tags"><tag><i class="fa fa-tag"></i>java</tag><tag><i class='fa fa-tag'></i>springboot</tag><tag><i class='fa fa-tag'></i>spring</tag><tag><i class='fa fa-tag'></i>auto-configuration</tag></small>
        
    </div>
</header>

<div class="container">
    <section id="main_content">
        <ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#tech-used">Technologies used</a></li>
  <li><a href="#structure">Project Structure</a></li>
  <li><a href="#config-classes">Create config classes</a></li>
</ul>

<h2 id="introduction-">Introduction <a name="introduction"></a></h2>
<p>The goal of this blog is to understand the autoconfiguration provided by SpringBoot. I’ll be creating a logging library for demo purpose and that will include Auto-Configuration class to create all required beans for that library.</p>

<h2 id="technologies-used-">Technologies used <a name="tech-used"></a></h2>

<ul>
  <li>Java 11</li>
  <li>Spring Boot 2.2.4</li>
  <li>Gradle 6.0.1</li>
</ul>

<h2 id="project-structure-">Project Structure <a name="structure"></a></h2>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/bo4objeiz94xh40vme53.png" alt="Alt Text" /></p>

<p>I’m using a Gradle multi-module project. The module <code class="language-plaintext highlighter-rouge">logging-library</code> will be a shared library that will be used in the <code class="language-plaintext highlighter-rouge">service</code> module.</p>

<h2 id="create-config-classes-">Create config classes <a name="config-classes"></a></h2>
<p>Now It’s time to create required config classes. I’ve created a config class called <code class="language-plaintext highlighter-rouge">LoggingAutoConfiguration</code> and marked as <code class="language-plaintext highlighter-rouge">@Configuration</code> and created one <a href="#">conditional bean</a>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoggingAutoConfiguration</span> <span class="o">{</span>

    <span class="c1">// We can define beans here</span>

    <span class="nd">@ConditionalOnMissingBean</span><span class="o">(</span><span class="nc">Logger</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">Logger</span> <span class="nf">getLogger</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsoleLogger</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>As of now this class is just a normal spring configuration and to make it auto-configuration class we need to follow 2 steps:</p>

<h3 id="step-1-create-springfactories-file">Step 1: Create <em>spring.factories</em> file</h3>
<p>Create a file in<code class="language-plaintext highlighter-rouge">logging-library</code> with name <code class="language-plaintext highlighter-rouge">spring.factories</code> under <code class="language-plaintext highlighter-rouge">resources\META-INF\</code> directory.</p>
<h3 id="step-2-register-the-auto-config-class">Step 2: Register the auto-config class</h3>
<p>Now add your configuration class into the <code class="language-plaintext highlighter-rouge">spring.factories</code>.</p>
<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span class="p">=</span><span class="s">tutorials.logging.LoggingAutoConfiguration</span>
</code></pre></div></div>

<p>That’s it!!!</p>

<p>Now we can inject the module in <code class="language-plaintext highlighter-rouge">service</code> and we don’t need to specify any package to scan from <code class="language-plaintext highlighter-rouge">logging-library</code> our auto-configuration class will take care of that.</p>

<p><img src="https://dev-to-uploads.s3.amazonaws.com/i/ih7dvtntzv436823selo.png" alt="Alt Text" /></p>

<p>You can find the running code <a href="https://github.com/jeetmp3/tutorials/tree/master/springboot-auto-config">here</a></p>

    </section>
</div>


</body>
</html>